<%# 1. Allow users to sign up and sign in %>
<%# 2. Allow users to browse for clubs (clubs > index.html.erb) %>
<%# 3. Feature some new clubs, newest first %>
<%# 4. Feature some new discussions, newest first %>

<h1>When book clubs meet digital spaces.</h1>
<p>Start an open discussion about your favourite books and authors. Read more. Find like-minded individuals.</p>

<%= button_to "Get started", new_user_registration_path, { method: 'get' } %>
<%= link_to "Browse for clubs", clubs_path %>

<div>
    <h2>New Clubs</h2>

    <% @clubs.each do |club| %>
    <div>
        <%= image_tag Book.find(club.shelf.current_book).image if club.shelf.current_book %>
        
        <%= link_to club.name, club %>
        <%= club.genre %>
        <%= club.description %>

        <%= link_to "Join club", { :controller => "memberships", :action => "new", :user_id => session[:user_id], :club_id => club.id } if !club.followed_by?(current_user)  %>
    </div>
    <% end %>

    <%= link_to "See more", clubs_path %>

</div>

<div>
    <h2>Curious About What We Discuss?</h2>
    <p>We round up some of the most interesting discussions every week and feature them here.</p>

    <% @discussions.each do |discussion| %>
    <div>
        <%= discussion.book_quote %>
        <%= discussion.title %>

        â€” currently discussed by <%= link_to discussion.book.club.name, club_path(discussion.book.club) %> in <%= link_to discussion.book.title, { :controller => "books", :action => "show", :id => discussion.book.id, :shelf_id => discussion.book.shelf.id, :club_id => discussion.book.club.id } %>


    </div>
    <% end %>

    <%= link_to "See more", clubs_path %>

</div>